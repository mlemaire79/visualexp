{# @TODO CEDRIK - Templating ( Merci ma biche :p ) #}
{% extends "admin/base_site.html" %}
{% load i18n admin_urls admin_static admin_list %}
{% load staticfiles %}
{% load qr_tags %}
{% load visual_extras %}
{% block extrastyle %}
  {{ block.super }}
  <link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}" />
  {{ media.css }}
{% endblock %}

{% block extrahead %}
<script type="text/javascript">window.__admin_media_prefix__ = "/static/admin/";</script>
<script type="text/javascript" src="{% static "admin/js/core.js" %}"></script>
<script type="text/javascript" src="{% static "admin/js/vendor/jquery/jquery.min.js" %}"></script>
<script type="text/javascript" src="{% static "admin/js/jquery.init.js" %}"></script>
<script type="text/javascript" src="{% static "admin/js/admin/RelatedObjectLookups.js" %}"></script>
<script type="text/javascript" src="{% static "admin/js/actions.min.js" %}"></script>
{% endblock %}

{% block content %}
<h2>Exposition : {{ exposition.title }}</h2> 
{# Afficher d'autres infos sur l'expo ? Genre les dates d√©but, fin ? #}
{# @TODO Afficher le plan pour reperage visuel #}
{% if display_list %}
 {% for display in display_list %}
    {{ display.position}}
    {{ display.artwork.title }}
    {{ display.has_arrived}}
    {% url 'public-artwork' display.artwork.artwork_id as artwork_url %}
    {% with qr_url="http://"|addstr:request.get_host|addstr:artwork_url %}

    {% qr_from_text qr_url %}
{% endwith %}    
    {# @TODO Afficher un truc propre pour le boolean #}
<form action="delete_display/{{ display.pk }}/" method="post">
  {% csrf_token %}
  {# @TODO Templater le bouton, on voit rien ! #}
  <button class="btn-sm">{% trans supprimer %}</button>
</form>
 {% endfor %}
{% endif %}
<form action="" method="post">
	{% csrf_token %}
	{{ form }}
	<input type="submit" value="{% trans 'Ajouter' %}"></input>
</form>

{% endblock %}

{% block footer %}
{% endblock %}
